{% extends "base.html" %}

{% block title %}Бенчмарк Клуб — Сообщество энтузиастов{% endblock %}

{% block content %}
  <section class="hero">
    <div class="hero__text">
      <h1>Создаем идеальные ПК вместе</h1>
      <p>Делитесь сборками, обсуждайте апгрейды, публикуйте результаты разгона и получайте признание сообщества.</p>
      {% if current_user.is_authenticated %}
        <a class="btn btn-accent" href="{{ url_for('builds.create') }}">Создать сборку</a>
      {% else %}
        <a class="btn btn-accent" href="{{ url_for('auth.register') }}">Присоединиться</a>
      {% endif %}
    </div>
    <div class="hero__cards">
      <article class="card">
        <h3>Каталог билдов</h3>
        <p>Попробуйте лучшие конфигурации от экспертов клуба и получите советы от сообщества.</p>
      </article>
      <article class="card">
        <h3>Геймификация</h3>
        <p>Зарабатывайте достижения и звания за активность и помощь другим участникам.</p>
      </article>
      <article class="card">
        <h3>Бенчмарки</h3>
        <p>Ведите журнал своих тестов и разгонов, отслеживайте прогресс железа.</p>
      </article>
    </div>
  </section>

  <section class="grid">
    <h2>Свежие сборки</h2>
    <div class="cards-grid">
      {% for build in featured_builds %}
        <article class="card">
          {% if build.cover_image %}
            <div class="card__media">
              <img src="{{ url_for('media.uploaded_file', filename=build.cover_image) }}" alt="Обложка сборки {{ build.title }}">
            </div>
          {% endif %}
          <h3><a href="{{ url_for('builds.detail', build_id=build.id) }}">{{ build.title }}</a></h3>
          <p class="card__meta">
            От
            {% if build.allow_profile_link() %}
              <a href="{{ url_for('main.expert_profile', user_id=build.author_id) }}">{{ build.display_author_name() }}</a>
            {% else %}
              {{ build.display_author_name() }}
            {% endif %}
            · {{ build.created_at.strftime("%d.%m.%Y") }}
          </p>
          <p>{{ build.description|truncate(160, True, '…') }}</p>
          <div class="tags">
            {% for tag in build.tags %}
              <a class="tag" href="{{ url_for('builds.catalog', tag=tag.name) }}">#{{ tag.name }}</a>
            {% endfor %}
          </div>
        </article>
      {% else %}
        <p>Еще нет опубликованных сборок. Будьте первым!</p>
      {% endfor %}
    </div>
  </section>

  <section class="grid">
    <h2>Лидерборд авторов</h2>
    <ol class="leaderboard">
      {% for item in leaderboard %}
        <li>
          <span class="leaderboard__rank">{{ loop.index }}</span>
          <a href="{{ url_for('main.expert_profile', user_id=item.id) }}">{{ item.display_name }}</a>
          <span class="leaderboard__meta">{{ item.published }} публикаций</span>
        </li>
      {% else %}
        <li>Лидерборд появится после публикации первых сборок.</li>
      {% endfor %}
    </ol>
  </section>
{% endblock %}

